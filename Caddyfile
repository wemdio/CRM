{
	# Enable FrankenPHP
	frankenphp
	order php_server before file_server
}

# Timeweb may route traffic to different internal ports depending on app type.
# Listen on a few common ones to avoid "white screen" due to port mismatch.
:80, :8080, :8000, :3000 {
	# Log every request to stdout so we can see if Timeweb actually routes traffic here
	log {
		output stdout
		format console
	}

	# Set the root to the public directory
	root * /app/public

	# Enable compression
	encode zstd gzip

	# Simple healthcheck endpoint (no PHP)
	respond /healthz "ok" 200

	# Enable PHP server
	php_server
}

